#!/usr/bin/env node
const program = require('commander');
const path = require('path');
const colors = require('colors');
const help = process.argv.slice(2)[0];
const commands = require('./commands');
var proyect_path = path.resolve();
var application = path.basename(proyect_path);

if (!help || help === "-h" || help === "--help") {
	program.outputHelp(commands[0](commands));
}else{
	delete commands[0];
}
commands.forEach(function (definition) {
	var args = definition.args.length > 0 ? `[${definition.args.join(" ] [")}]` : "";
	var command = program.command(`${definition.cmd} ${args}`)
		.description(definition.description)
		.action(definition.action);
	definition.options.forEach(function (option) {
		command.option(`${option[0]}, ${option[1]}`, option[2]);
	});
});
program.parse(process.argv);